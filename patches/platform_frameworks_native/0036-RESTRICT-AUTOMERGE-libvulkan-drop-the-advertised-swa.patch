From ee7a9ca859add62690d1413d0e9c88f8ec42984d Mon Sep 17 00:00:00 2001
From: Yiwei Zhang <zzyiwei@google.com>
Date: Fri, 12 Apr 2019 17:54:32 -0700
Subject: [PATCH 36/48] [RESTRICT AUTOMERGE] libvulkan: drop the advertised
 swapchain spec version to 68

Bug: 130182551
Test: build and CtsDeqpTestCases
Change-Id: If8b7e59879c9eaf1ee453cb43f2d4a7f06bf0ac9
---
 vulkan/libvulkan/driver.cpp | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/vulkan/libvulkan/driver.cpp b/vulkan/libvulkan/driver.cpp
index 56bc35ec7..19d0146dc 100644
--- a/vulkan/libvulkan/driver.cpp
+++ b/vulkan/libvulkan/driver.cpp
@@ -945,7 +945,9 @@ VkResult EnumerateDeviceExtensionProperties(
 
             memcpy(prop.extensionName, VK_KHR_SWAPCHAIN_EXTENSION_NAME,
                    sizeof(VK_KHR_SWAPCHAIN_EXTENSION_NAME));
-            prop.specVersion = VK_KHR_SWAPCHAIN_SPEC_VERSION;
+            // b/130182551 VK_KHR_SWAPCHAIN_SPEC_VERSION > 68 has structs the
+            // loader doesn't handle properly. So drop the spec version to 68.
+            prop.specVersion = 68;
         }
     }
 
-- 
2.17.1

